{"ast":null,"code":"var _jsxFileName = \"D:\\\\MEGA\\\\Shared\\\\React\\\\ignis\\\\frontend\\\\src\\\\Components\\\\ContextMenuHandler.js\",\n    _class,\n    _temp;\n\nimport React, { createRef } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./ContextMenuHandler.scss\";\nimport ChevronIcon from \"../Icons/Chevron.svg\";\nimport ErrorBoundary from \"./ErrorBoundary\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction exclude(object, ...exclusions) {\n  const output = Object.assign({}, object);\n\n  for (const exclusion of exclusions) delete output[exclusion];\n\n  return output;\n}\n\nclass ContextMenu extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.ref = /*#__PURE__*/createRef();\n\n    this.docClickEv = e => {\n      if (this.ref.current && !this.ref.current.contains(e.target) && !document.getElementsByClassName(\"ContextMenu\")[0].contains(e.target)) {\n        this.close();\n      }\n    };\n  }\n\n  close() {\n    if (ContextMenu.activeWrapper) {\n      ContextMenu.activeWrapper.setState({\n        menu: null,\n        open: false\n      });\n    }\n  }\n\n  componentDidMount() {\n    document.addEventListener(\"click\", this.docClickEv);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"click\", this.docClickEv);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(ErrorBoundary, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ContextMenu\",\n        ...this.props,\n        ref: this.ref,\n        children: this.props.children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 4\n    }, this);\n  }\n\n}\n\nContextMenu.Handler = (_temp = _class = class extends React.Component {\n  render() {\n    return /*#__PURE__*/_jsxDEV(ErrorBoundary, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: ContextMenu.Handler.ref,\n        className: \"ContextMenuWrapper MainContextMenuContainer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 4\n    }, this);\n  }\n\n}, _class.ref = /*#__PURE__*/createRef(), _temp);\nContextMenu.Wrapper = class extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      menu: null,\n      open: false\n    };\n    this.ref = /*#__PURE__*/createRef();\n\n    this.handleContextMenu = e => {\n      var _this$props$menu$prop, _this$props$menu$prop2, _this$props$menu$prop3, _this$props$menu$prop4;\n\n      if (typeof e.preventDefault === \"function\") e.preventDefault();\n\n      if (ContextMenu.activeWrapper) {\n        if (this.ref.current.contains(ContextMenu.activeWrapper.ref.current) && ContextMenu.activeWrapper.props.menu !== this.props.menu) return;\n        ContextMenu.activeWrapper.setState({\n          menu: null,\n          open: false\n        });\n      }\n\n      ContextMenu.activeWrapper = this;\n      let top = ((_this$props$menu$prop = (_this$props$menu$prop2 = this.props.menu.props).overrideY) === null || _this$props$menu$prop === void 0 ? void 0 : _this$props$menu$prop.call(_this$props$menu$prop2)) || e.clientY;\n      let left = ((_this$props$menu$prop3 = (_this$props$menu$prop4 = this.props.menu.props).overrideX) === null || _this$props$menu$prop3 === void 0 ? void 0 : _this$props$menu$prop3.call(_this$props$menu$prop4)) || e.clientX;\n\n      while (left + 200 > window.innerWidth) left -= 10;\n\n      this.setState({\n        menu: /*#__PURE__*/ReactDOM.createPortal( /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ContextMenuContainer SecondaryBg\",\n          ...this.publicProps,\n          style: {\n            position: \"fixed\",\n            top,\n            left\n          },\n          children: this.props.menu\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 5\n        }, this), ContextMenu.Handler.ref.current),\n        open: true\n      });\n    };\n  }\n\n  get publicProps() {\n    return exclude(this.props, \"menu\", \"openOnClick\", \"wrapperClassName\", \"overrideX\", \"overrideY\");\n  }\n\n  async componentDidUpdate(prevProps, prevState, snapshot) {\n    if (ContextMenu.activeWrapper === this && !this.state.open) ContextMenu.activeWrapper = null;\n\n    if (this.state.open && this.ref.current) {\n      const [menu] = document.getElementsByClassName(\"ContextMenuContainer\");\n      const rect = menu.getBoundingClientRect();\n      menu.style.transform = rect.y + rect.height > window.innerHeight ? `translateY(${window.innerHeight - (rect.y + rect.height) - 20}px)` : null;\n    }\n  }\n\n  render() {\n    return this.props.menu ? /*#__PURE__*/_jsxDEV(ErrorBoundary, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: this.ref,\n        className: \"ContextMenuWrapper \" + (this.props.wrapperClassName || \"\"),\n        onClick: this.props.openOnClick ? e => {\n          if (typeof e.target.onClick === \"function\") return;\n          this.handleContextMenu(this.props.openOnClick());\n        } : null,\n        ...this.publicProps,\n        onContextMenu: this.handleContextMenu,\n        children: [this.props.children, /*#__PURE__*/_jsxDEV(ErrorBoundary, {\n          children: this.state.open ? this.state.menu : null\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 4\n    }, this) : this.props.children;\n  }\n\n};\nContextMenu.Item = class extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.handleClick = e => {\n      e.preventDefault();\n      e.stopPropagation();\n\n      if (ContextMenu.activeWrapper && this.props.autoClose) {\n        ContextMenu.activeWrapper.setState({\n          menu: null,\n          open: false\n        });\n      }\n\n      if (this.props.onClick) {\n        this.props.onClick(this);\n      }\n    };\n  }\n\n  render() {\n    const props = Object.assign({}, this.props);\n    delete props.autoClose;\n    delete props.icon;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ContextMenuItem\",\n      ...props,\n      onClick: this.handleClick,\n      children: [this.props.icon ? /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n        icon: this.props.icon,\n        className: \"Icon\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 25\n      }, this) : null, this.props.children]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 4\n    }, this);\n  }\n\n};\nContextMenu.SubMenuItem = class extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      open: false\n    };\n\n    this.handleMouseEnter = () => {\n      this.setState({\n        open: true\n      });\n    };\n\n    this.handleMouseLeave = () => {\n      this.setState({\n        open: false\n      });\n    };\n\n    this.handleClick = e => {\n      if (e.target != e.currentTarget) {\n        return;\n      }\n\n      if (ContextMenu.activeWrapper && this.props.autoClose) {\n        ContextMenu.activeWrapper.setState({\n          menu: null,\n          open: false\n        });\n      }\n\n      if (this.props.onClick) {\n        this.props.onClick(this);\n      }\n    };\n  }\n\n  mount(menu) {\n    if (!menu) return;\n    const rect = menu.getBoundingClientRect();\n    menu.style.transform = rect.y + rect.height > window.innerHeight ? `translateY(${window.innerHeight - (rect.y + rect.height) - 20}px)` : null;\n\n    if (rect.x + rect.width > window.innerWidth) {\n      menu.style.left = \"unset\";\n      menu.style.right = \"100%\";\n    }\n  }\n\n  render() {\n    const props = Object.assign({}, this.props);\n    delete props.autoClose;\n    delete props.label;\n    delete props.icon;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ContextMenuItem HasSubMenu\",\n      ...props,\n      onClick: this.handleClick,\n      onMouseEnter: this.handleMouseEnter,\n      onMouseLeave: this.handleMouseLeave,\n      children: [this.props.icon ? /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n        icon: this.props.icon,\n        className: \"Icon\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 25\n      }, this) : null, this.props.label, \" \", /*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"ContextSubMenuChevron\",\n        src: ChevronIcon\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 26\n      }, this), this.state.open ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ContextMenuContainer SubMenuContainer SecondaryBg\",\n        ref: this.mount,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ContextMenu SubMenu\",\n          children: this.props.children\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 6\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 4\n    }, this);\n  }\n\n};\nContextMenu.ToggleItem = class extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      checked: false\n    };\n\n    this.callback = () => {\n      if (ContextMenu.activeWrapper && this.props.autoClose) {\n        ContextMenu.activeWrapper.setState({\n          menu: null,\n          open: false\n        });\n      }\n\n      const checked = !this.state.checked;\n\n      if (this.props.callback) {\n        this.props.callback(checked);\n      }\n\n      this.setState({\n        checked\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      checked: this.props.checked\n    });\n  }\n\n  render() {\n    const props = Object.assign({}, this.props);\n    delete props.autoClose;\n    delete props.callback;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ContextMenuItem ToggleItem\",\n      ...props,\n      onClick: this.callback,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ToggleBox\" + (this.state.checked ? \" Checked\" : \"\"),\n        children: this.state.checked ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ToggleBoxTick\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 30\n        }, this) : null\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 5\n      }, this), this.props.children]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 4\n    }, this);\n  }\n\n};\nContextMenu.Divider = class extends React.Component {\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ContextMenuDivider\",\n      ...this.props\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 4\n    }, this);\n  }\n\n};\nexport default ContextMenu;","map":{"version":3,"sources":["D:/MEGA/Shared/React/ignis/frontend/src/Components/ContextMenuHandler.js"],"names":["React","createRef","ReactDOM","ErrorBoundary","FontAwesomeIcon","exclude","object","exclusions","output","Object","assign","exclusion","ContextMenu","Component","ref","docClickEv","e","current","contains","target","document","getElementsByClassName","close","activeWrapper","setState","menu","open","componentDidMount","addEventListener","componentWillUnmount","removeEventListener","render","props","children","Handler","Wrapper","state","handleContextMenu","preventDefault","top","overrideY","clientY","left","overrideX","clientX","window","innerWidth","createPortal","publicProps","position","componentDidUpdate","prevProps","prevState","snapshot","rect","getBoundingClientRect","style","transform","y","height","innerHeight","wrapperClassName","openOnClick","onClick","Item","handleClick","stopPropagation","autoClose","icon","SubMenuItem","handleMouseEnter","handleMouseLeave","currentTarget","mount","x","width","right","label","ChevronIcon","ToggleItem","checked","callback","Divider"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,OAAO,2BAAP;;AAGA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,SAASC,eAAT,QAAgC,gCAAhC;;;AAEA,SAASC,OAAT,CAAiBC,MAAjB,EAAyB,GAAGC,UAA5B,EAAwC;AACvC,QAAMC,MAAM,GAAGC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBJ,MAAlB,CAAf;;AAEA,OAAK,MAAMK,SAAX,IAAwBJ,UAAxB,EAAoC,OAAOC,MAAM,CAACG,SAAD,CAAb;;AACpC,SAAOH,MAAP;AACA;;AAED,MAAMI,WAAN,SAA0BZ,KAAK,CAACa,SAAhC,CAA0C;AAAA;AAAA;AAAA,SACzCC,GADyC,gBACnCb,SAAS,EAD0B;;AAAA,SAGzCc,UAHyC,GAG5BC,CAAC,IAAI;AACjB,UAAI,KAAKF,GAAL,CAASG,OAAT,IAAoB,CAAC,KAAKH,GAAL,CAASG,OAAT,CAAiBC,QAAjB,CAA0BF,CAAC,CAACG,MAA5B,CAArB,IAA4D,CAACC,QAAQ,CAACC,sBAAT,CAAgC,aAAhC,EAA+C,CAA/C,EAAkDH,QAAlD,CAA2DF,CAAC,CAACG,MAA7D,CAAjE,EAAuI;AACtI,aAAKG,KAAL;AACA;AACD,KAPwC;AAAA;;AASzCA,EAAAA,KAAK,GAAG;AACP,QAAIV,WAAW,CAACW,aAAhB,EAA+B;AAC9BX,MAAAA,WAAW,CAACW,aAAZ,CAA0BC,QAA1B,CAAmC;AAAEC,QAAAA,IAAI,EAAE,IAAR;AAAcC,QAAAA,IAAI,EAAE;AAApB,OAAnC;AACA;AACD;;AAEDC,EAAAA,iBAAiB,GAAG;AACnBP,IAAAA,QAAQ,CAACQ,gBAAT,CAA0B,OAA1B,EAAmC,KAAKb,UAAxC;AACA;;AAEDc,EAAAA,oBAAoB,GAAG;AACtBT,IAAAA,QAAQ,CAACU,mBAAT,CAA6B,OAA7B,EAAsC,KAAKf,UAA3C;AACA;;AAEDgB,EAAAA,MAAM,GAAG;AACR,wBACC,QAAC,aAAD;AAAA,6BACC;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA,WAAiC,KAAKC,KAAtC;AAA6C,QAAA,GAAG,EAAE,KAAKlB,GAAvD;AAAA,kBACG,KAAKkB,KAAL,CAAWC;AADd;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,YADD;AAOA;;AA/BwC;;AAkC1CrB,WAAW,CAACsB,OAAZ,qBAAsB,cAAclC,KAAK,CAACa,SAApB,CAA8B;AAGnDkB,EAAAA,MAAM,GAAG;AACR,wBACC,QAAC,aAAD;AAAA,6BACC;AAAK,QAAA,GAAG,EAAEnB,WAAW,CAACsB,OAAZ,CAAoBpB,GAA9B;AAAmC,QAAA,SAAS,EAAC;AAA7C;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,YADD;AAOA;;AAXkD,CAApD,SACQA,GADR,gBACcb,SAAS,EADvB;AAcAW,WAAW,CAACuB,OAAZ,GAAsB,cAAcnC,KAAK,CAACa,SAApB,CAA8B;AAAA;AAAA;AAAA,SACnDuB,KADmD,GAC3C;AAAEX,MAAAA,IAAI,EAAE,IAAR;AAAcC,MAAAA,IAAI,EAAE;AAApB,KAD2C;AAAA,SAEnDZ,GAFmD,gBAE7Cb,SAAS,EAFoC;;AAAA,SAQnDoC,iBARmD,GAQ/BrB,CAAC,IAAI;AAAA;;AACxB,UAAI,OAAOA,CAAC,CAACsB,cAAT,KAA6B,UAAjC,EACCtB,CAAC,CAACsB,cAAF;;AAED,UAAI1B,WAAW,CAACW,aAAhB,EAA+B;AAC9B,YAAI,KAAKT,GAAL,CAASG,OAAT,CAAiBC,QAAjB,CAA0BN,WAAW,CAACW,aAAZ,CAA0BT,GAA1B,CAA8BG,OAAxD,KAAoEL,WAAW,CAACW,aAAZ,CAA0BS,KAA1B,CAAgCP,IAAhC,KAAyC,KAAKO,KAAL,CAAWP,IAA5H,EACC;AACDb,QAAAA,WAAW,CAACW,aAAZ,CAA0BC,QAA1B,CAAmC;AAAEC,UAAAA,IAAI,EAAE,IAAR;AAAcC,UAAAA,IAAI,EAAE;AAApB,SAAnC;AACA;;AAEDd,MAAAA,WAAW,CAACW,aAAZ,GAA4B,IAA5B;AAEA,UAAIgB,GAAG,GAAG,yDAAKP,KAAL,CAAWP,IAAX,CAAgBO,KAAhB,EAAsBQ,SAAtB,iHAAuCxB,CAAC,CAACyB,OAAnD;AACA,UAAIC,IAAI,GAAG,0DAAKV,KAAL,CAAWP,IAAX,CAAgBO,KAAhB,EAAsBW,SAAtB,mHAAuC3B,CAAC,CAAC4B,OAApD;;AAEA,aAAOF,IAAI,GAAG,GAAP,GAAaG,MAAM,CAACC,UAA3B,EACCJ,IAAI,IAAI,EAAR;;AAED,WAAKlB,QAAL,CAAc;AAAEC,QAAAA,IAAI,eAAEvB,QAAQ,CAAC6C,YAAT,eACpB;AAAK,UAAA,SAAS,EAAC,kCAAf;AAAA,aAAsD,KAAKC,WAA3D;AAAwE,UAAA,KAAK,EAAE;AAC9EC,YAAAA,QAAQ,EAAE,OADoE;AAE9EV,YAAAA,GAF8E;AAEzEG,YAAAA;AAFyE,WAA/E;AAAA,oBAGK,KAAKV,KAAL,CAAWP;AAHhB;AAAA;AAAA;AAAA;AAAA,gBADoB,EAIUb,WAAW,CAACsB,OAAZ,CAAoBpB,GAApB,CAAwBG,OAJlC,CAAR;AAIoDS,QAAAA,IAAI,EAAE;AAJ1D,OAAd;AAKA,KA/BkD;AAAA;;AAIpC,MAAXsB,WAAW,GAAG;AACjB,WAAO3C,OAAO,CAAC,KAAK2B,KAAN,EAAa,MAAb,EAAqB,aAArB,EAAoC,kBAApC,EAAwD,WAAxD,EAAqE,WAArE,CAAd;AACA;;AA2BuB,QAAlBkB,kBAAkB,CAACC,SAAD,EAAYC,SAAZ,EAAuBC,QAAvB,EAAiC;AACxD,QAAIzC,WAAW,CAACW,aAAZ,KAA8B,IAA9B,IAAsC,CAAC,KAAKa,KAAL,CAAWV,IAAtD,EACCd,WAAW,CAACW,aAAZ,GAA4B,IAA5B;;AAED,QAAI,KAAKa,KAAL,CAAWV,IAAX,IAAmB,KAAKZ,GAAL,CAASG,OAAhC,EAAyC;AACxC,YAAM,CAAEQ,IAAF,IAAWL,QAAQ,CAACC,sBAAT,CAAgC,sBAAhC,CAAjB;AACA,YAAMiC,IAAI,GAAG7B,IAAI,CAAC8B,qBAAL,EAAb;AAEA9B,MAAAA,IAAI,CAAC+B,KAAL,CAAWC,SAAX,GAAuBH,IAAI,CAACI,CAAL,GAASJ,IAAI,CAACK,MAAd,GAAuBd,MAAM,CAACe,WAA9B,GACnB,cAAaf,MAAM,CAACe,WAAP,IAAsBN,IAAI,CAACI,CAAL,GAASJ,IAAI,CAACK,MAApC,IAA8C,EAAG,KAD3C,GAEpB,IAFH;AAGA;AACD;;AAED5B,EAAAA,MAAM,GAAG;AACR,WAAO,KAAKC,KAAL,CAAWP,IAAX,gBACN,QAAC,aAAD;AAAA,6BACC;AAAK,QAAA,GAAG,EAAE,KAAKX,GAAf;AAAoB,QAAA,SAAS,EAAE,yBAAyB,KAAKkB,KAAL,CAAW6B,gBAAX,IAA+B,EAAxD,CAA/B;AAA4F,QAAA,OAAO,EAAE,KAAK7B,KAAL,CAAW8B,WAAX,GAAyB9C,CAAC,IAAI;AAClI,cAAI,OAAOA,CAAC,CAACG,MAAF,CAAS4C,OAAhB,KAA6B,UAAjC,EACC;AAED,eAAK1B,iBAAL,CAAuB,KAAKL,KAAL,CAAW8B,WAAX,EAAvB;AACA,SALoG,GAKjG,IALJ;AAAA,WAMM,KAAKd,WANX;AAMwB,QAAA,aAAa,EAAE,KAAKX,iBAN5C;AAAA,mBAOG,KAAKL,KAAL,CAAWC,QAPd,eASC,QAAC,aAAD;AAAA,oBACG,KAAKG,KAAL,CAAWV,IAAX,GAAkB,KAAKU,KAAL,CAAWX,IAA7B,GAAoC;AADvC;AAAA;AAAA;AAAA;AAAA,gBATD;AAAA;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,YADM,GAgBH,KAAKO,KAAL,CAAWC,QAhBf;AAiBA;;AAjEkD,CAApD;AAoEArB,WAAW,CAACoD,IAAZ,GAAmB,cAAchE,KAAK,CAACa,SAApB,CAA8B;AAAA;AAAA;;AAAA,SAChDoD,WADgD,GAClCjD,CAAC,IAAI;AAClBA,MAAAA,CAAC,CAACsB,cAAF;AACAtB,MAAAA,CAAC,CAACkD,eAAF;;AAEA,UAAItD,WAAW,CAACW,aAAZ,IAA6B,KAAKS,KAAL,CAAWmC,SAA5C,EAAuD;AACtDvD,QAAAA,WAAW,CAACW,aAAZ,CAA0BC,QAA1B,CAAmC;AAAEC,UAAAA,IAAI,EAAE,IAAR;AAAcC,UAAAA,IAAI,EAAE;AAApB,SAAnC;AACA;;AAED,UAAI,KAAKM,KAAL,CAAW+B,OAAf,EAAwB;AACvB,aAAK/B,KAAL,CAAW+B,OAAX,CAAmB,IAAnB;AACA;AACD,KAZ+C;AAAA;;AAchDhC,EAAAA,MAAM,GAAG;AACR,UAAMC,KAAK,GAAGvB,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB,KAAKsB,KAAvB,CAAd;AAEA,WAAOA,KAAK,CAACmC,SAAb;AACA,WAAOnC,KAAK,CAACoC,IAAb;AAEA,wBACC;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA,SAAqCpC,KAArC;AAA4C,MAAA,OAAO,EAAE,KAAKiC,WAA1D;AAAA,iBACG,KAAKjC,KAAL,CAAWoC,IAAX,gBAAkB,QAAC,eAAD;AAAiB,QAAA,IAAI,EAAE,KAAKpC,KAAL,CAAWoC,IAAlC;AAAwC,QAAA,SAAS,EAAC;AAAlD;AAAA;AAAA;AAAA;AAAA,cAAlB,GAA+E,IADlF,EAGG,KAAKpC,KAAL,CAAWC,QAHd;AAAA;AAAA;AAAA;AAAA;AAAA,YADD;AAOA;;AA3B+C,CAAjD;AA8BArB,WAAW,CAACyD,WAAZ,GAA0B,cAAcrE,KAAK,CAACa,SAApB,CAA8B;AAAA;AAAA;AAAA,SACvDuB,KADuD,GAC/C;AAAEV,MAAAA,IAAI,EAAE;AAAR,KAD+C;;AAAA,SAGvD4C,gBAHuD,GAGpC,MAAM;AACxB,WAAK9C,QAAL,CAAc;AAAEE,QAAAA,IAAI,EAAE;AAAR,OAAd;AACA,KALsD;;AAAA,SAOvD6C,gBAPuD,GAOpC,MAAM;AACxB,WAAK/C,QAAL,CAAc;AAAEE,QAAAA,IAAI,EAAE;AAAR,OAAd;AACA,KATsD;;AAAA,SAWvDuC,WAXuD,GAWzCjD,CAAC,IAAI;AAClB,UAAIA,CAAC,CAACG,MAAF,IAAYH,CAAC,CAACwD,aAAlB,EAAiC;AAChC;AACA;;AAED,UAAI5D,WAAW,CAACW,aAAZ,IAA6B,KAAKS,KAAL,CAAWmC,SAA5C,EAAuD;AACtDvD,QAAAA,WAAW,CAACW,aAAZ,CAA0BC,QAA1B,CAAmC;AAAEC,UAAAA,IAAI,EAAE,IAAR;AAAcC,UAAAA,IAAI,EAAE;AAApB,SAAnC;AACA;;AAED,UAAI,KAAKM,KAAL,CAAW+B,OAAf,EAAwB;AACvB,aAAK/B,KAAL,CAAW+B,OAAX,CAAmB,IAAnB;AACA;AACD,KAvBsD;AAAA;;AAyBvDU,EAAAA,KAAK,CAAChD,IAAD,EAAO;AACX,QAAI,CAACA,IAAL,EAAW;AACX,UAAM6B,IAAI,GAAG7B,IAAI,CAAC8B,qBAAL,EAAb;AAEA9B,IAAAA,IAAI,CAAC+B,KAAL,CAAWC,SAAX,GAAuBH,IAAI,CAACI,CAAL,GAASJ,IAAI,CAACK,MAAd,GAAuBd,MAAM,CAACe,WAA9B,GACnB,cAAaf,MAAM,CAACe,WAAP,IAAsBN,IAAI,CAACI,CAAL,GAASJ,IAAI,CAACK,MAApC,IAA8C,EAAG,KAD3C,GAEpB,IAFH;;AAIA,QAAIL,IAAI,CAACoB,CAAL,GAASpB,IAAI,CAACqB,KAAd,GAAsB9B,MAAM,CAACC,UAAjC,EAA6C;AAC5CrB,MAAAA,IAAI,CAAC+B,KAAL,CAAWd,IAAX,GAAkB,OAAlB;AACAjB,MAAAA,IAAI,CAAC+B,KAAL,CAAWoB,KAAX,GAAmB,MAAnB;AACA;AACD;;AAED7C,EAAAA,MAAM,GAAG;AACR,UAAMC,KAAK,GAAGvB,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB,KAAKsB,KAAvB,CAAd;AAEA,WAAOA,KAAK,CAACmC,SAAb;AACA,WAAOnC,KAAK,CAAC6C,KAAb;AACA,WAAO7C,KAAK,CAACoC,IAAb;AAEA,wBACC;AAAK,MAAA,SAAS,EAAC,4BAAf;AAAA,SAAgDpC,KAAhD;AAAuD,MAAA,OAAO,EAAE,KAAKiC,WAArE;AAAkF,MAAA,YAAY,EAAE,KAAKK,gBAArG;AAAuH,MAAA,YAAY,EAAE,KAAKC,gBAA1I;AAAA,iBACG,KAAKvC,KAAL,CAAWoC,IAAX,gBAAkB,QAAC,eAAD;AAAiB,QAAA,IAAI,EAAE,KAAKpC,KAAL,CAAWoC,IAAlC;AAAwC,QAAA,SAAS,EAAC;AAAlD;AAAA;AAAA;AAAA;AAAA,cAAlB,GAA+E,IADlF,EAEG,KAAKpC,KAAL,CAAW6C,KAFd,oBAEsB;AAAK,QAAA,SAAS,EAAC,uBAAf;AAAuC,QAAA,GAAG,EAAEC;AAA5C;AAAA;AAAA;AAAA;AAAA,cAFtB,EAGG,KAAK1C,KAAL,CAAWV,IAAX,gBACD;AAAK,QAAA,SAAS,EAAC,mDAAf;AAAmE,QAAA,GAAG,EAAE,KAAK+C,KAA7E;AAAA,+BACC;AAAK,UAAA,SAAS,EAAC,qBAAf;AAAA,oBACG,KAAKzC,KAAL,CAAWC;AADd;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,cADC,GAME,IATL;AAAA;AAAA;AAAA;AAAA;AAAA,YADD;AAaA;;AA3DsD,CAAxD;AA8DArB,WAAW,CAACmE,UAAZ,GAAyB,cAAc/E,KAAK,CAACa,SAApB,CAA8B;AAAA;AAAA;AAAA,SACtDuB,KADsD,GAC9C;AAAE4C,MAAAA,OAAO,EAAE;AAAX,KAD8C;;AAAA,SAGtDC,QAHsD,GAG3C,MAAM;AAChB,UAAIrE,WAAW,CAACW,aAAZ,IAA6B,KAAKS,KAAL,CAAWmC,SAA5C,EAAuD;AACtDvD,QAAAA,WAAW,CAACW,aAAZ,CAA0BC,QAA1B,CAAmC;AAAEC,UAAAA,IAAI,EAAE,IAAR;AAAcC,UAAAA,IAAI,EAAE;AAApB,SAAnC;AACA;;AAED,YAAMsD,OAAO,GAAG,CAAC,KAAK5C,KAAL,CAAW4C,OAA5B;;AAEA,UAAI,KAAKhD,KAAL,CAAWiD,QAAf,EAAyB;AACxB,aAAKjD,KAAL,CAAWiD,QAAX,CAAoBD,OAApB;AACA;;AAED,WAAKxD,QAAL,CAAc;AAAEwD,QAAAA;AAAF,OAAd;AACA,KAfqD;AAAA;;AAiBtDrD,EAAAA,iBAAiB,GAAG;AACnB,SAAKH,QAAL,CAAc;AAAEwD,MAAAA,OAAO,EAAE,KAAKhD,KAAL,CAAWgD;AAAtB,KAAd;AACA;;AAEDjD,EAAAA,MAAM,GAAG;AACR,UAAMC,KAAK,GAAGvB,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB,KAAKsB,KAAvB,CAAd;AAEA,WAAOA,KAAK,CAACmC,SAAb;AACA,WAAOnC,KAAK,CAACiD,QAAb;AAEA,wBACC;AAAK,MAAA,SAAS,EAAC,4BAAf;AAAA,SAAgDjD,KAAhD;AAAuD,MAAA,OAAO,EAAE,KAAKiD,QAArE;AAAA,8BACC;AAAK,QAAA,SAAS,EAAE,eAAe,KAAK7C,KAAL,CAAW4C,OAAX,GAAqB,UAArB,GAAkC,EAAjD,CAAhB;AAAA,kBACG,KAAK5C,KAAL,CAAW4C,OAAX,gBAAsB;AAAK,UAAA,SAAS,EAAC;AAAf;AAAA;AAAA;AAAA;AAAA,gBAAtB,GAA0D;AAD7D;AAAA;AAAA;AAAA;AAAA,cADD,EAIG,KAAKhD,KAAL,CAAWC,QAJd;AAAA;AAAA;AAAA;AAAA;AAAA,YADD;AAQA;;AAnCqD,CAAvD;AAsCArB,WAAW,CAACsE,OAAZ,GAAsB,cAAclF,KAAK,CAACa,SAApB,CAA8B;AACnDkB,EAAAA,MAAM,GAAG;AACR,wBACC;AAAK,MAAA,SAAS,EAAC,oBAAf;AAAA,SAAwC,KAAKC;AAA7C;AAAA;AAAA;AAAA;AAAA,YADD;AAGA;;AALkD,CAApD;AAQA,eAAepB,WAAf","sourcesContent":["import React, { createRef } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./ContextMenuHandler.scss\";\r\n\r\nimport ChevronIcon from \"../Icons/Chevron.svg\";\r\nimport ErrorBoundary from \"./ErrorBoundary\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n\r\nfunction exclude(object, ...exclusions) {\r\n\tconst output = Object.assign({}, object);\r\n\r\n\tfor (const exclusion of exclusions) delete output[exclusion];\r\n\treturn output;\r\n}\r\n\r\nclass ContextMenu extends React.Component {\r\n\tref = createRef();\r\n\r\n\tdocClickEv = e => {\r\n\t\tif (this.ref.current && !this.ref.current.contains(e.target) && !document.getElementsByClassName(\"ContextMenu\")[0].contains(e.target)) {\r\n\t\t\tthis.close();\r\n\t\t}\r\n\t}\r\n\r\n\tclose() {\r\n\t\tif (ContextMenu.activeWrapper) {\r\n\t\t\tContextMenu.activeWrapper.setState({ menu: null, open: false });\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tdocument.addEventListener(\"click\", this.docClickEv);\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tdocument.removeEventListener(\"click\", this.docClickEv);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<ErrorBoundary>\r\n\t\t\t\t<div className=\"ContextMenu\" {...this.props} ref={this.ref}>\r\n\t\t\t\t\t{ this.props.children }\r\n\t\t\t\t</div>\r\n\t\t\t</ErrorBoundary>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nContextMenu.Handler = class extends React.Component {\r\n\tstatic ref = createRef();\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<ErrorBoundary>\r\n\t\t\t\t<div ref={ContextMenu.Handler.ref} className=\"ContextMenuWrapper MainContextMenuContainer\">\r\n\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t</ErrorBoundary>\r\n\t\t);\r\n\t}\r\n};\r\n\r\nContextMenu.Wrapper = class extends React.Component {\r\n\tstate = { menu: null, open: false };\r\n\tref = createRef();\r\n\t\r\n\tget publicProps() {\r\n\t\treturn exclude(this.props, \"menu\", \"openOnClick\", \"wrapperClassName\", \"overrideX\", \"overrideY\");\r\n\t}\r\n\r\n\thandleContextMenu = e => {\r\n\t\tif (typeof(e.preventDefault) === \"function\")\r\n\t\t\te.preventDefault();\r\n\r\n\t\tif (ContextMenu.activeWrapper) {\r\n\t\t\tif (this.ref.current.contains(ContextMenu.activeWrapper.ref.current) && ContextMenu.activeWrapper.props.menu !== this.props.menu)\r\n\t\t\t\treturn;\r\n\t\t\tContextMenu.activeWrapper.setState({ menu: null, open: false });\r\n\t\t}\r\n\r\n\t\tContextMenu.activeWrapper = this;\r\n\t\t\r\n\t\tlet top = this.props.menu.props.overrideY?.() || e.clientY;\r\n\t\tlet left = this.props.menu.props.overrideX?.() || e.clientX;\r\n\t\t\r\n\t\twhile (left + 200 > window.innerWidth)\r\n\t\t\tleft -= 10;\r\n\t\t\r\n\t\tthis.setState({ menu: ReactDOM.createPortal(\r\n\t\t\t\t<div className=\"ContextMenuContainer SecondaryBg\" {...this.publicProps} style={{\r\n\t\t\t\t\tposition: \"fixed\",\r\n\t\t\t\t\ttop, left \r\n\t\t\t\t}}>{ this.props.menu }</div>, ContextMenu.Handler.ref.current), open: true });\r\n\t}\r\n\r\n\tasync componentDidUpdate(prevProps, prevState, snapshot) {\r\n\t\tif (ContextMenu.activeWrapper === this && !this.state.open)\r\n\t\t\tContextMenu.activeWrapper = null;\r\n\t\t\r\n\t\tif (this.state.open && this.ref.current) {\r\n\t\t\tconst [ menu ] = document.getElementsByClassName(\"ContextMenuContainer\");\r\n\t\t\tconst rect = menu.getBoundingClientRect();\r\n\t\t\t\r\n\t\t\tmenu.style.transform = rect.y + rect.height > window.innerHeight\r\n\t\t\t\t? `translateY(${window.innerHeight - (rect.y + rect.height) - 20}px)`\r\n\t\t\t\t: null;\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn this.props.menu ? (\r\n\t\t\t<ErrorBoundary>\r\n\t\t\t\t<div ref={this.ref} className={\"ContextMenuWrapper \" + (this.props.wrapperClassName || \"\")} onClick={this.props.openOnClick ? e => {\r\n\t\t\t\t\tif (typeof(e.target.onClick) === \"function\")\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.handleContextMenu(this.props.openOnClick());\r\n\t\t\t\t} : null}\r\n\t\t\t\t\t {...this.publicProps} onContextMenu={this.handleContextMenu}>\r\n\t\t\t\t\t{ this.props.children }\r\n\t\t\t\t\t\r\n\t\t\t\t\t<ErrorBoundary>\r\n\t\t\t\t\t\t{ this.state.open ? this.state.menu : null }\r\n\t\t\t\t\t</ErrorBoundary>\r\n\t\t\t\t</div>\r\n\t\t\t</ErrorBoundary>\r\n\t\t) : this.props.children;\r\n\t}\r\n}\r\n\r\nContextMenu.Item = class extends React.Component {\r\n\thandleClick = e => {\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t\t\r\n\t\tif (ContextMenu.activeWrapper && this.props.autoClose) {\r\n\t\t\tContextMenu.activeWrapper.setState({ menu: null, open: false });\r\n\t\t}\r\n\r\n\t\tif (this.props.onClick) {\r\n\t\t\tthis.props.onClick(this);\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst props = Object.assign({}, this.props);\r\n\r\n\t\tdelete props.autoClose;\r\n\t\tdelete props.icon;\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"ContextMenuItem\" {...props} onClick={this.handleClick}>\r\n\t\t\t\t{ this.props.icon ? <FontAwesomeIcon icon={this.props.icon} className=\"Icon\"/> : null }\r\n\t\t\t\t\r\n\t\t\t\t{ this.props.children }\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nContextMenu.SubMenuItem = class extends React.Component {\r\n\tstate = { open: false };\r\n\r\n\thandleMouseEnter = () => {\r\n\t\tthis.setState({ open: true });\r\n\t}\r\n\r\n\thandleMouseLeave = () => {\r\n\t\tthis.setState({ open: false });\r\n\t}\r\n\r\n\thandleClick = e => {\r\n\t\tif (e.target != e.currentTarget) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (ContextMenu.activeWrapper && this.props.autoClose) {\r\n\t\t\tContextMenu.activeWrapper.setState({ menu: null, open: false });\r\n\t\t}\r\n\r\n\t\tif (this.props.onClick) {\r\n\t\t\tthis.props.onClick(this);\r\n\t\t}\r\n\t}\r\n\t\r\n\tmount(menu) {\r\n\t\tif (!menu) return;\r\n\t\tconst rect = menu.getBoundingClientRect();\r\n\r\n\t\tmenu.style.transform = rect.y + rect.height > window.innerHeight\r\n\t\t\t? `translateY(${window.innerHeight - (rect.y + rect.height) - 20}px)`\r\n\t\t\t: null;\r\n\t\t\r\n\t\tif (rect.x + rect.width > window.innerWidth) {\r\n\t\t\tmenu.style.left = \"unset\";\r\n\t\t\tmenu.style.right = \"100%\";\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst props = Object.assign({}, this.props);\r\n\r\n\t\tdelete props.autoClose;\r\n\t\tdelete props.label;\r\n\t\tdelete props.icon;\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"ContextMenuItem HasSubMenu\" {...props} onClick={this.handleClick} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\r\n\t\t\t\t{ this.props.icon ? <FontAwesomeIcon icon={this.props.icon} className=\"Icon\"/> : null }\r\n\t\t\t\t{ this.props.label } <img className=\"ContextSubMenuChevron\" src={ChevronIcon}/>\r\n\t\t\t\t{ this.state.open ? (\r\n\t\t\t\t\t<div className=\"ContextMenuContainer SubMenuContainer SecondaryBg\" ref={this.mount}>\r\n\t\t\t\t\t\t<div className=\"ContextMenu SubMenu\">\r\n\t\t\t\t\t\t\t{ this.props.children }\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : null }\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nContextMenu.ToggleItem = class extends React.Component {\r\n\tstate = { checked: false };\r\n\r\n\tcallback = () => {\r\n\t\tif (ContextMenu.activeWrapper && this.props.autoClose) {\r\n\t\t\tContextMenu.activeWrapper.setState({ menu: null, open: false });\r\n\t\t}\r\n\r\n\t\tconst checked = !this.state.checked;\r\n\r\n\t\tif (this.props.callback) {\r\n\t\t\tthis.props.callback(checked);\r\n\t\t}\r\n\r\n\t\tthis.setState({ checked });\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.setState({ checked: this.props.checked });\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst props = Object.assign({}, this.props);\r\n\r\n\t\tdelete props.autoClose;\r\n\t\tdelete props.callback;\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"ContextMenuItem ToggleItem\" {...props} onClick={this.callback}>\r\n\t\t\t\t<div className={\"ToggleBox\" + (this.state.checked ? \" Checked\" : \"\")}>\r\n\t\t\t\t\t{ this.state.checked ? (<div className=\"ToggleBoxTick\"/>) : null }\r\n\t\t\t\t</div>\r\n\t\t\t\t{ this.props.children }\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nContextMenu.Divider = class extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"ContextMenuDivider\" {...this.props}/>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default ContextMenu;"]},"metadata":{},"sourceType":"module"}