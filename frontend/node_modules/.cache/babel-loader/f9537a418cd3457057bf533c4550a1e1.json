{"ast":null,"code":"import _toConsumableArray from\"D:/Drive/Shared/JavaScript/Electron/ignis/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"D:/Drive/Shared/JavaScript/Electron/ignis/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/Drive/Shared/JavaScript/Electron/ignis/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"D:/Drive/Shared/JavaScript/Electron/ignis/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/Drive/Shared/JavaScript/Electron/ignis/frontend/node_modules/@babel/runtime/helpers/esm/createSuper\";import _slicedToArray from\"D:/Drive/Shared/JavaScript/Electron/ignis/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import\"./Toasts.scss\";import{getRandomKey,joinClassNames}from\"../Classes/Constants\";import Timer from\"../Classes/TimerClass\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function Toast(_ref){var children=_ref.children,type=_ref.type,life=_ref.life,remove=_ref.remove,callback=_ref.callback,color=_ref.color,_ref$fixedTime=_ref.fixedTime,fixedTime=_ref$fixedTime===void 0?false:_ref$fixedTime;var handleRemove=function handleRemove(){setClosing(true);setTimeout(remove,500);};var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),closing=_React$useState2[0],setClosing=_React$useState2[1];var timer=React.useMemo(function(){return new Timer(handleRemove,life*1000,false);},[]);var progressBar=React.useRef();var handleMouseEnter=function handleMouseEnter(){timer.pause();progressBar.current.style.animationPlayState=\"paused\";};var handleMouseLeave=function handleMouseLeave(){timer.resume();progressBar.current.style.animationPlayState=\"running\";};React.useEffect(function(){var handleFocus=function handleFocus(){return!fixedTime&&handleMouseLeave();};var handleBlur=function handleBlur(){return!fixedTime&&handleMouseEnter();};window.addEventListener(\"focus\",handleFocus);window.addEventListener(\"blur\",handleBlur);(fixedTime||document.hasFocus())&&handleMouseLeave();return function(){window.removeEventListener(\"focus\",handleFocus);window.removeEventListener(\"blur\",handleBlur);};});return/*#__PURE__*/_jsxs(\"div\",{className:joinClassNames(\"Toast\",[closing,\"Closing\"],type),onMouseEnter:fixedTime?null:handleMouseEnter,onMouseLeave:fixedTime?null:handleMouseLeave,onClick:callback?function(e){callback(e);timer.end();}:function(){timer.end();},style:{cursor:callback?\"pointer\":null,backgroundColor:color},children:[children,/*#__PURE__*/_jsx(\"div\",{className:\"ProgressBarContainer\",children:/*#__PURE__*/_jsx(\"div\",{ref:progressBar,className:\"ProgressBar\",style:{animationDuration:life+\"s\"}})})]});}var Toasts=/*#__PURE__*/function(_React$Component){_inherits(Toasts,_React$Component);var _super=_createSuper(Toasts);function Toasts(){var _this;_classCallCheck(this,Toasts);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={toasts:[]};return _this;}_createClass(Toasts,[{key:\"componentDidMount\",value:function componentDidMount(){Toasts.instance=this;}},{key:\"horizontalStyle\",get:function get(){return\"Center\";// switch (Settings.props.notifications.toasts.positionX) {\n// \tcase 0:\n// \t\treturn \"Left\";\n// \tcase 1:\n// \t\treturn \"Center\";\n// \tcase 2:\n// \t\treturn \"Right\";\n// }\n}},{key:\"verticalStyle\",get:function get(){return\"Bottom\";// switch (Settings.props.notifications.toasts.positionY) {\n// \tcase 0:\n// \t\treturn \"Top\";\n// \tcase 1:\n// \t\treturn \"Bottom\";\n// }\n}},{key:\"render\",value:function render(){var _this$state$toasts,_this2=this;return/*#__PURE__*/_jsxs(\"div\",{ref:Toasts.ref,className:joinClassNames(\"ToastsContainer\",this.horizontalStyle,this.verticalStyle),children:[/*#__PURE__*/_jsx(\"div\",{className:joinClassNames(\"ClearButton\",[!!((_this$state$toasts=this.state.toasts)===null||_this$state$toasts===void 0?void 0:_this$state$toasts.length),\"Visible\"]),onClick:function onClick(){return _this2.setState({toasts:[]});},children:/*#__PURE__*/_jsx(\"u\",{children:\"Close all\"})}),this.state.toasts]});}}],[{key:\"showToast\",value:function showToast(children){var _this3=this;var type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"\";var life=arguments.length>2&&arguments[2]!==undefined?arguments[2]:5;var additionalOptions=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var _additionalOptions$ca=additionalOptions.callback,callback=_additionalOptions$ca===void 0?null:_additionalOptions$ca,_additionalOptions$co=additionalOptions.color,color=_additionalOptions$co===void 0?null:_additionalOptions$co,_additionalOptions$fi=additionalOptions.fixedTime,fixedTime=_additionalOptions$fi===void 0?false:_additionalOptions$fi;var toast=/*#__PURE__*/React.createElement(Toast,{key:getRandomKey(),children:children,type:type,life:life,color:color,fixedTime:fixedTime,remove:function remove(){_this3.instance.setState({toasts:_this3.instance.state.toasts.filter(function(t){return t!==toast;})});},callback:callback});this.instance.setState({toasts:[].concat(_toConsumableArray(this.instance.state.toasts),[toast])});return toast;}}]);return Toasts;}(React.Component);Toasts.ref=/*#__PURE__*/React.createRef();export{Toasts as default};","map":{"version":3,"sources":["D:/Drive/Shared/JavaScript/Electron/ignis/frontend/src/Components/Toasts.js"],"names":["React","getRandomKey","joinClassNames","Timer","Toast","children","type","life","remove","callback","color","fixedTime","handleRemove","setClosing","setTimeout","useState","closing","timer","useMemo","progressBar","useRef","handleMouseEnter","pause","current","style","animationPlayState","handleMouseLeave","resume","useEffect","handleFocus","handleBlur","window","addEventListener","document","hasFocus","removeEventListener","e","end","cursor","backgroundColor","animationDuration","Toasts","state","toasts","instance","ref","horizontalStyle","verticalStyle","length","setState","additionalOptions","toast","createElement","key","filter","t","Component","createRef"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport \"./Toasts.scss\";\r\nimport { getRandomKey, joinClassNames } from \"../Classes/Constants\";\r\nimport Timer from \"../Classes/TimerClass\";\r\n\r\nexport function Toast({ children, type, life, remove, callback, color, fixedTime = false }) {\r\n\tconst handleRemove = () => {\r\n\t\tsetClosing(true);\r\n\r\n\t\tsetTimeout(remove, 500);\r\n\t};\r\n\t\r\n\tconst [closing, setClosing] = React.useState(false);\r\n\tconst timer = React.useMemo(() => new Timer(handleRemove, life * 1000, false), []);\r\n\tconst progressBar = React.useRef();\r\n\t\r\n\tconst handleMouseEnter = () => {\r\n\t\ttimer.pause();\r\n\t\tprogressBar.current.style.animationPlayState = \"paused\";\r\n\t};\r\n\t\r\n\tconst handleMouseLeave = () => {\r\n\t\ttimer.resume();\r\n\t\tprogressBar.current.style.animationPlayState = \"running\";\r\n\t};\r\n\t\r\n\tReact.useEffect(() => {\r\n\t\tconst handleFocus = () => !fixedTime && handleMouseLeave();\r\n\t\tconst handleBlur = () => !fixedTime && handleMouseEnter();\r\n\t\t\r\n\t\twindow.addEventListener(\"focus\", handleFocus);\r\n\t\twindow.addEventListener(\"blur\", handleBlur);\r\n\t\t\r\n\t\t(fixedTime || document.hasFocus()) && handleMouseLeave();\r\n\t\t\r\n\t\treturn () => {\r\n\t\t\twindow.removeEventListener(\"focus\", handleFocus);\r\n\t\t\twindow.removeEventListener(\"blur\", handleBlur);\r\n\t\t};\r\n\t});\r\n\t\r\n\treturn (\r\n\t\t<div className={joinClassNames(\"Toast\", [closing, \"Closing\"], type)}\r\n\t\t\t onMouseEnter={fixedTime ? null : handleMouseEnter}\r\n\t\t\t onMouseLeave={fixedTime ? null : handleMouseLeave}\r\n\t\t\t onClick={callback ? e => { callback(e); timer.end(); } : () => { timer.end(); }}\r\n\t\t\t style={{ cursor: callback ? \"pointer\" : null, backgroundColor: color }}>\r\n\t\t\t{ children }\r\n\r\n\t\t\t<div className=\"ProgressBarContainer\">\r\n\t\t\t\t<div ref={progressBar} className=\"ProgressBar\" style={{ animationDuration: life + \"s\" }}/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default class Toasts extends React.Component {\r\n\tstatic instance;\r\n\tstatic ref = React.createRef();\r\n\t\r\n\tstate = { toasts: [] };\r\n\r\n\tcomponentDidMount() {\r\n\t\tToasts.instance = this;\r\n\t}\r\n\t\r\n\tstatic showToast(children, type = \"\", life = 5, additionalOptions = {}) {\r\n\t\tconst { callback = null, color = null, fixedTime = false } = additionalOptions;\r\n\t\t\r\n\t\tconst toast = React.createElement(Toast, {\r\n\t\t\tkey: getRandomKey(),\r\n\t\t\tchildren, type, life, color, fixedTime,\r\n\t\t\tremove: () => {\r\n\t\t\t\tthis.instance.setState({ toasts: this.instance.state.toasts.filter(t => t !== toast) });\r\n\t\t\t},\r\n\t\t\tcallback\r\n\t\t});\r\n\r\n\t\tthis.instance.setState({ toasts: [ ...this.instance.state.toasts, toast ] });\r\n\t\treturn toast;\r\n\t}\r\n\t\r\n\tget horizontalStyle() {\r\n\t\treturn \"Center\";\r\n\t\t\r\n\t\t// switch (Settings.props.notifications.toasts.positionX) {\r\n\t\t// \tcase 0:\r\n\t\t// \t\treturn \"Left\";\r\n\t\t// \tcase 1:\r\n\t\t// \t\treturn \"Center\";\r\n\t\t// \tcase 2:\r\n\t\t// \t\treturn \"Right\";\r\n\t\t// }\r\n\t}\r\n\t\r\n\tget verticalStyle() {\r\n\t\treturn \"Bottom\";\r\n\t\t\r\n\t\t// switch (Settings.props.notifications.toasts.positionY) {\r\n\t\t// \tcase 0:\r\n\t\t// \t\treturn \"Top\";\r\n\t\t// \tcase 1:\r\n\t\t// \t\treturn \"Bottom\";\r\n\t\t// }\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div ref={Toasts.ref} className={joinClassNames(\"ToastsContainer\", this.horizontalStyle, this.verticalStyle)}>\r\n\t\t\t\t<div className={joinClassNames(\"ClearButton\", [!!this.state.toasts?.length, \"Visible\"])} onClick={() => this.setState({ toasts: [] })}>\r\n\t\t\t\t\t<u>Close all</u>\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t{ this.state.toasts }\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}"]},"metadata":{},"sourceType":"module"}